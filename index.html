<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bagus Payment</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: Arial, sans-serif;
        }

        body {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            overflow: hidden;
            position: relative;
            background-color: black;
        }

        /* Background video */
        video {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            z-index: -1;
        }

        /* Judul dengan animasi */
        .title {
            font-size: 40px;
            font-weight: bold;
            color: cyan;
            text-align: center;
            text-shadow: 0 0 15px cyan, 0 0 30px blue;
            position: absolute;
            top: 15%;
            animation: flicker 1.5s infinite alternate;
        }

        @keyframes flicker {
            0% { opacity: 1; }
            100% { opacity: 0.8; }
        }

        /* Kotak blur */
        .container {
            background: rgba(0, 0, 0, 0.7);
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            width: 90%;
            max-width: 400px;
            position: relative;
            top: -30px;
        }

        .container h2 {
            color: #4CAF50;
            margin-bottom: 10px;
        }

        .input-box {
            width: 100%;
            padding: 10px;
            font-size: 16px;
            margin-bottom: 10px;
            border: none;
            border-radius: 5px;
            text-align: center;
        }

        .btn {
            background: #008CBA;
            color: white;
            border: none;
            padding: 10px;
            cursor: pointer;
            font-size: 16px;
            width: 100%;
            border-radius: 5px;
        }

        .btn:hover {
            background: #005f73;
        }

        #qris {
            margin-top: 15px;
        }

        #status {
            color: lime;
            margin-top: 10px;
            font-weight: bold;
        }
    </style>
</head>
<body>

    <!-- Background Video -->
    <video autoplay loop muted>
        <source src="your-video.mp4" type="video/mp4">
    </video>

    <!-- Judul dengan animasi ketik -->
    <div class="title" id="animatedTitle"></div>

    <!-- Form Donasi -->
    <div class="container">
        <h2>Form Donasi</h2>
        <input type="number" id="nominal" class="input-box" placeholder="Masukkan nominal">
        <button class="btn" onclick="buatQRIS()">Buat QRIS</button>
        <div id="qris"></div>
        <div id="status"></div>
    </div>

    <script>
        // Animasi Ketik & Hapus Unlimited
        const titleElement = document.getElementById("animatedTitle");
        const texts = ["Bagus Payment"];
        let textIndex = 0;
        let charIndex = 0;
        let isDeleting = false;

        function typeEffect() {
            const currentText = texts[textIndex];
            if (isDeleting) {
                titleElement.innerHTML = currentText.substring(0, charIndex);
                charIndex--;
            } else {
                titleElement.innerHTML = currentText.substring(0, charIndex);
                charIndex++;
            }

            if (!isDeleting && charIndex === currentText.length) {
                isDeleting = true;
                setTimeout(typeEffect, 1500); // Tunggu sebelum hapus
            } else if (isDeleting && charIndex === 0) {
                isDeleting = false;
                setTimeout(typeEffect, 500); // Tunggu sebelum ketik ulang
            } else {
                setTimeout(typeEffect, isDeleting ? 100 : 150);
            }
        }

        typeEffect();

        // Fungsi Buat QRIS
        function buatQRIS() {
            let nominal = document.getElementById("nominal").value;
            if (!nominal || nominal < 1000) {
                alert("Nominal minimal 1000!");
                return;
            }

            fetch(`https://rafaelxd.tech/api/orkut/createpayment?amount=${nominal}&codeqr=00020101021126670016COM.NOBUBANK.WWW01189360050300000879140214057125036591790303UMI51440014ID.CO.QRIS.WWW0215ID20232646203860303UMI5204481253033605802ID5918GOODFM21 OK11756396008MINAHASA61059537162070703A016304D7A6`)
                .then(response => response.json())
                .then(data => {
                    if (data.status) {
                        let qrImageUrl = data.result.qrImageUrl;
                        document.getElementById("qris").innerHTML = `<img src="${qrImageUrl}" width="200px">`;
                        startCountdown();
                    } else {
                        alert("Gagal membuat QRIS!");
                    }
                })
                .catch(error => console.error("Error:", error));
        }

        // Countdown 5 Menit
        function startCountdown() {
            let timeLeft = 300; // 5 menit dalam detik
            let countdownInterval = setInterval(() => {
                let minutes = Math.floor(timeLeft / 60);
                let seconds = timeLeft % 60;
                if (seconds < 10) seconds = "0" + seconds;

                document.getElementById("status").innerHTML = `Silakan scan QRIS sebelum waktu habis. (${minutes}:${seconds})`;

                if (timeLeft <= 0) {
                    clearInterval(countdownInterval);
                    document.getElementById("qris").innerHTML = "";
                    document.getElementById("status").innerHTML = "Yah waktunya sudah habis :(";
                }

                timeLeft--;
            }, 1000);
        }
    </script>

</body>
</html>
